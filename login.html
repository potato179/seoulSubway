<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>수도권 전동차 정보</title>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script src = "../js/public/jquery.cookie.js"></script>
        <link rel = "stylesheet" href = "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity = "sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin = "anonymous">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
        <script src = "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity = "sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin = "anonymous"></script>
        <script src = "https://kit.fontawesome.com/06fb83cb17.js" crossorigin = "anonymous"></script>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@800&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://potato179.github.io/style/potato-min.css">
        <style>
            body {
                font-family: 'Nanum Gothic', sans-serif;        
            }
            .half, .half .container > .row {
                height: 100vh;
                min-height: 700px; 
            }
            .half .bg {
                height: 200px; 
            }
            @media (max-width: 991.98px) {
                .half .bg {
                    height: 200px; 
                } 
            }
            .half .contents {
                background: #f5f5f5; 
            }
            .half .contents, .half .bg {
                width: 100%; 
            }
            @media (max-width: 1199.98px) {
                .half .contents, .half .bg {
                    width: 100%; 
                } 
            }
            .half .bg {
                background-size: cover;
                background-position: center; 
            }

            .form-block {
                background: #fff;
                padding: 40px;
                margin-top: -300px; 
            }
            @media (max-width: 991.98px) {
                .form-block {
                    padding: 25px; 
                } 
            }
        </style>
    </head>
    <body>
        <nav class = "navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
            <div class = "container">
                <img src = "./public/img/icon.png" width = "50px;">&nbsp;&nbsp;
                <a class = "navbar-brand" href = "./index.html" style = "font-weight: bold;">짜장메트로</a>
                <button class = "navbar-toggler" type = "button" data-toggle = "collapse" data-target = "#navbarCollapse" aria-controls = "navbarCollapse" aria-expanded = "false">
                <span class = "navbar-toggler-icon"></span>
                </button>
                <div class = "collapse navbar-collapse" id = "navbarCollapse">
                    <ul class = "navbar-nav mr-auto">
                        <li class = "nav-item active">
                            <a class = "nav-link" href = "./index.html">홈<span class = "sr-only"></span></a>
                        </li>
                        <li class = "nav-item active">
                            <a class = "nav-link" href = "./arrivals.html">실시간 도착정보<span class = "sr-only"></span></a>
                        </li>
                        <li class = "nav-item active">
                            <a class = "nav-link" href = "./station.html?1270">역 정보<span class = "sr-only"></span></a>
                        </li>
                        <li class = "nav-item active">
                            <a class = "nav-link" href = "./community.html">게시판<span class = "sr-only"></span></a>
                        </li>
                        <li class = "nav-item active">
                            <a class = "nav-link" href = "./info.html">누리집 정보<span class = "sr-only"></span></a>
                        </li>
                        <li class = "nav-item dropdown">
                            <a class = "nav-link dropdown-toggle" href = "#" id = "dropdown07XL" data-bs-toggle = "dropdown" aria-expanded = "false">자료실</a>
                            <ul class = "dropdown-menu" aria-labelledby = "dropdown07XL">
                                <li><a class = "dropdown-item" href = "./trainInfo.html#">전동차 정보</a></li>
                                <li><a class = "dropdown-item" href = "#">가상 행선안내기</a></li>
                            </ul>
                        </li>
                    </ul>
                    <a style = "margin: 5px" class = "btn btn-outline-primary" id = "log_in_out" type = "button" onclick = 'window.location.href = "login.html"'>로그인</a>
                    <a style = "margin: 5px" class = "btn btn-outline-primary" id = "btn_join" type = "button" onclick = 'window.location.href = "join.html"'>회원가입</a>
                </div>
            </div>
        </nav>
        <br><br>
        <div class = "half">
            <div class = "bg order-1 order-md-2" style = "background-image: url('public/img/login_bg.jpg');"></div>
            <div class = "contents order-2 order-md-1">
                <div class = "container">
                    <div class = "row justify-content-center">
                        <div class="col-md-6">
                            <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
                            <div class = "form-block">
                                <div class = "center">
                                    <h2>로그인</h2><br>
                                </div>
                                <form>
                                    <div class = "form-group first">
                                        <label for = "email">이메일</label>
                                        <input type = "text" class = "form-control" id = "email">
                                    </div>
                                    <div class="form-group last mb-3">
                                        <label for = "password">비밀번호</label>
                                        <input type = "password" class = "form-control" id = "pw">
                                    </div><br><br>
                                    <div class = "center">
                                        <button type = "submit" class = "btn btn-lg btn-outline-success btn-block" onclick = "signin();">로그인</button><br><br>
                                        <a href = "./join.html">회원가입</a>
                                        <a href = "./index.html">돌아가기</a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>    
        </div>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script>
            function signin() {
                var email = $('#email').val();
                var pw = $('#pw').val();
                var sendData =  {email: email, pw: pw};

                var ajaxData = { 
                    type: "GET", 
                    url : "login",
                    data: sendData, 
                    dataType: "json", 
                    success :  onSuccess,
                    error: onError
                };
                $.ajax(ajaxData);
            }

            function onSuccess (data, status, xhr) { 
                console.log(data);

                if(data.condition == "success"){
                    alert(data.message);        
                    window.location.href = "./index.html";
                }
                else if(data.condition == "fail"){
                    alert(data.message);
                }
            }

            function onError (jqXHR, textStatus, errorThrown) { 
                alert(`오류가 발생하였습니다: ${jqXHR.responseText}`); 
            }
        </script>
    </body>
</html>