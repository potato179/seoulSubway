<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>역정보 입력</title>
        <script src = "https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity = "sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin = "anonymous"></script>
        <link rel = "stylesheet" href = "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity = "sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin = "anonymous">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
        <script src = "https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity = "sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin = "anonymous"></script>
        <script src = "https://kit.fontawesome.com/06fb83cb17.js" crossorigin = "anonymous"></script>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@800&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://potato179.github.io/style/potato-min.css">
        <style>
            body{
                font-family: 'Nanum Gothic', sans-serif;        
            }
        </style>
    </head>
    <body>
        <form style = "text-align: center;" class = "container form-signin">
            <h2 class="h3 mb-3 font-weight-normal">역정보를 입력하세요</h2>
            <input id = "line" style = "margin-bottom: 10px;" class = "form-control" placeholder = "호선(1호선, 경의중앙선, 신분당선 등)" required></input>
            <input id = "id" style = "margin-bottom: 10px;" class = "form-control" placeholder = "역번호(K320 등)" required></input>
            <input id = "name" style = "margin-bottom: 10px;" class = "form-control" placeholder = "역이름(행신 등)" required></input>
            <input id = "foriegn" style = "margin-bottom: 10px;" class = "form-control" placeholder = "외국어 표기(영어 · 중국어 · 일본어)" required></input>
            <input id = "transfer" style = "margin-bottom: 10px;" class = "form-control" placeholder = "환승노선 - 띄어쓰기 단위로 저장(예시: 1호선 2호선 경의중앙선)" required></input>
            <input id = "prev" style = "margin-bottom: 10px;" class = "form-control" placeholder = "이전역 번호(K319 등)"></input>
            <input id = "next" style = "margin-bottom: 10px;" class = "form-control" placeholder = "다음역 번호(K321 등)"></input>
            <input id = "doors" style = "margin-bottom: 10px;" class = "form-control" placeholder = "내리는문(오른쪽, 왼쪽)"></input>
            <input id = "crossable" style = "margin-bottom: 10px;" class = "form-control" placeholder = "횡단 가능(가능, 불가)"></input>
            <input id = "rapid" style = "margin-bottom: 10px;" class = "form-control" placeholder = "급행(없는 경우 공백, 급행 정차, 특급 정차)"></input>
            <input id = "restroom" style = "margin-bottom: 10px;" class = "form-control" placeholder = "화장실(있음, 없음)"></input>
            <input id = "company" style = "margin-bottom: 10px;" class = "form-control" placeholder = "운영사(한국철도공사, 서울교통공사 등)"></input>
            <input id = "address" style = "margin-bottom: 10px;" class = "form-control" placeholder = "역 주소"></input>
            <input id = "contact" style = "margin-bottom: 10px;" class = "form-control" placeholder = "역 연락처(1544-7788 등)"></input>
            <input id = "opendate" style = "margin-bottom: 10px;" class = "form-control" placeholder = "개업일(1996/04/01 등)"></input>
            <input id = "nameorigin" style = "margin-bottom: 10px;" class = "form-control" placeholder = "역명 유래"></input>

            <button class="btn btn-lg btn-outline-success  btn-block" type="button" onclick="join();">등록</button>
            <a class="btn btn-lg btn-block" href="./index.html">취소</a>
        </form>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script>
            function join() {
                var line = $("#line").val();
                var id = $("#id").val();
                var name = $("#name").val();
                var foriegn = $("#foriegn").val();
                var transfer = $("#transfer").val();
                var prev = $("#prev").val();
                var next = $("#next").val();
                var doors = $("#doors").val();
                var crossable = $("#crossable").val();
                var rapid = $("#rapid").val();
                var restroom = $("#restroom").val();
                var company = $("#company").val();
                var address = $("#address").val();
                var contact = $("#contact").val();
                var opendate = $("#opendate").val();
                var nameorigin = $("#nameorigin").val();
                var sendData =  {line: line, id: id, name: name, foriegn: foriegn, transfer: transfer, prev: prev, next: next, doors: doors, crossable: crossable, rapid: rapid, restroom: restroom, company: company, address: address, contact: contact, opendate: opendate, nameorigin: nameorigin};

                var ajaxData = { 
                    type: "GET", 
                    url : "createstation",
                    data: sendData, 
                    dataType: "json", 
                    success :  onSuccess,
                    error: onError
                };

                $.ajax( ajaxData );
            }

            function onSuccess (data, status, xhr) { 
                console.log(data);
                if(data.condition == "등록됨"){
                    alert(data.message);        
                    window.location.href = "/"
                }
                else if(data.condition == "fail"){
                    alert(data.message);        
                }
            }

            function onError (jqXHR, textStatus, errorThrown) { 
                console.log(jqXHR.responseText); 
            }
        </script>
    </body>
</html>